<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Example: Template notes" href="template-notes.html" /><link rel="prev" title="Branches" href="../working-with-notes/branches.html" />
        <link rel="canonical" href="https://mm21.github.com/trilium-alchemy/sdk/declarative-notes/index.html" />

    <!-- Generated with Sphinx 7.4.7 and Furo 2023.09.10 -->
        <title>Declarative notes: Notes as code - TriliumAlchemy 0.7.0</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=0855384a" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">TriliumAlchemy 0.7.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../_static/logo-light.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../../_static/logo-dark.svg" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">TriliumAlchemy 0.7.0</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/setup.html">Setup</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SDK</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">User guide</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of User guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../working-with-notes/index.html">Working with notes</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Working with notes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../working-with-notes/sessions.html">Sessions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../working-with-notes/notes.html">Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../working-with-notes/attributes.html">Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../working-with-notes/branches.html">Branches</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children current-page"><a class="current reference internal" href="#">Declarative notes: Notes as code</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Declarative notes: Notes as code</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="template-notes.html">Example: Template notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="event-tracker.html">Example: Event tracker</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">CLI</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../reference/api.html">API</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.html"><code class="docutils literal notranslate"><span class="pre">trilium_alchemy</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of trilium_alchemy</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.html"><code class="docutils literal notranslate"><span class="pre">core</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of core</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.session.html"><code class="docutils literal notranslate"><span class="pre">session</span></code></a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.note.html"><code class="docutils literal notranslate"><span class="pre">note</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of note</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.note.attributes.html"><code class="docutils literal notranslate"><span class="pre">attributes</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.note.branches.html"><code class="docutils literal notranslate"><span class="pre">branches</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.note.content.html"><code class="docutils literal notranslate"><span class="pre">content</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.attribute.html"><code class="docutils literal notranslate"><span class="pre">attribute</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.branch.html"><code class="docutils literal notranslate"><span class="pre">branch</span></code></a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.html"><code class="docutils literal notranslate"><span class="pre">declarative</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of declarative</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html"><code class="docutils literal notranslate"><span class="pre">base</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.decorators.html"><code class="docutils literal notranslate"><span class="pre">decorators</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.entity.html"><code class="docutils literal notranslate"><span class="pre">entity</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.exceptions.html"><code class="docutils literal notranslate"><span class="pre">exceptions</span></code></a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.lib.html"><code class="docutils literal notranslate"><span class="pre">lib</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of lib</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.lib.note_types.html"><code class="docutils literal notranslate"><span class="pre">note_types</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.lib.extension_types.html"><code class="docutils literal notranslate"><span class="pre">extension_types</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.lib.system_types.html"><code class="docutils literal notranslate"><span class="pre">system_types</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../dev/guide/index.html">Developer guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/design/index.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/roadmap/index.html">Roadmap</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="declarative-notes-notes-as-code">
<span id="declarative-notes"></span><h1>Declarative notes: Notes as code<a class="headerlink" href="#declarative-notes-notes-as-code" title="Link to this heading">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<p>One of the goals of this project is to enable building, maintaining, and sharing complex note hierarchies using Python. This approach is declarative in nature, inspired by SQLAlchemy’s <a class="reference external" href="https://docs.sqlalchemy.org/en/20/orm/mapping_styles.html#orm-declarative-mapping">declarative mapping</a> approach.</p>
<p>The general idea of declarative programming is that you specify the desired end state, not the steps needed to reach it.</p>
<p>For a fully-featured example of a note hierarchy designed using this approach, see <a class="reference internal" href="event-tracker.html#event-tracker"><span class="std std-ref">Example: Event tracker</span></a>.</p>
<section id="note-subclasses">
<h2>Note subclasses<a class="headerlink" href="#note-subclasses" title="Link to this heading">¶</a></h2>
<p>The basic technique is to subclass <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyNote</span><span class="p">(</span><span class="n">BaseDeclarativeNote</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>When you subclass <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote</span></code></a>, you’re saying that attributes and child branches will be maintained by the class definition itself. Therefore any existing attributes or children will be deleted or modified to reflect the class.</p>
</section>
<section id="setting-fields">
<h2>Setting fields<a class="headerlink" href="#setting-fields" title="Link to this heading">¶</a></h2>
<p>Set the corresponding <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.note.html#trilium_alchemy.core.note.Note" title="trilium_alchemy.core.note.Note"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Note</span></code></a> fields upon instantiation by setting attributes suffixed with <code class="docutils literal notranslate"><span class="pre">_</span></code>:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote.title_" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote.title_"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote.title_</span></code></a></p></li>
<li><p><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote.note_type_" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote.note_type_"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote.note_type_</span></code></a></p></li>
<li><p><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote.mime_" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote.mime_"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote.mime_</span></code></a></p></li>
<li><p><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote.content_" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote.content_"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote.content_</span></code></a></p></li>
</ul>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyNote</span><span class="p">(</span><span class="n">BaseDeclarativeNote</span><span class="p">):</span>
    <span class="n">title_</span> <span class="o">=</span> <span class="s2">&quot;My title&quot;</span>
    <span class="n">note_type_</span> <span class="o">=</span> <span class="s2">&quot;text&quot;</span>
    <span class="n">mime_</span> <span class="o">=</span> <span class="s2">&quot;text/html&quot;</span>
    <span class="n">content_</span> <span class="o">=</span> <span class="s2">&quot;&lt;p&gt;Hello, world!&lt;/p&gt;&quot;</span>
</pre></div>
</div>
</section>
<section id="adding-attributes">
<h2>Adding attributes<a class="headerlink" href="#adding-attributes" title="Link to this heading">¶</a></h2>
<p>To add attributes, use the decorators <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.decorators.html#trilium_alchemy.core.declarative.decorators.label" title="trilium_alchemy.core.declarative.decorators.label"><code class="xref py py-obj docutils literal notranslate"><span class="pre">label</span></code></a> and <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.decorators.html#trilium_alchemy.core.declarative.decorators.relation" title="trilium_alchemy.core.declarative.decorators.relation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">relation</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Root</span><span class="p">(</span><span class="n">BaseDeclarativeNote</span><span class="p">):</span>
    <span class="n">note_id_</span> <span class="o">=</span> <span class="s2">&quot;root&quot;</span>

<span class="nd">@label</span><span class="p">(</span><span class="s2">&quot;myLabel&quot;</span><span class="p">)</span>
<span class="nd">@relation</span><span class="p">(</span><span class="s2">&quot;myRelation&quot;</span><span class="p">,</span> <span class="n">Root</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">MyNote</span><span class="p">(</span><span class="n">BaseDeclarativeNote</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">my_note</span> <span class="o">=</span> <span class="n">MyNote</span><span class="p">()</span>
</pre></div>
</div>
<p>This is equivalent to the following imperative approach:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_note</span> <span class="o">=</span> <span class="n">Note</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;MyNote&quot;</span><span class="p">)</span>
<span class="n">my_note</span> <span class="o">+=</span> <span class="p">[</span>
    <span class="n">Label</span><span class="p">(</span><span class="s2">&quot;myLabel&quot;</span><span class="p">),</span>
    <span class="n">Relation</span><span class="p">(</span><span class="s2">&quot;myRelation&quot;</span><span class="p">,</span> <span class="n">Note</span><span class="p">(</span><span class="n">note_id</span><span class="o">=</span><span class="s2">&quot;root&quot;</span><span class="p">)),</span>
<span class="p">]</span>
</pre></div>
</div>
<section id="icon-helper">
<h3>Icon helper<a class="headerlink" href="#icon-helper" title="Link to this heading">¶</a></h3>
<p>To set an icon (label <code class="docutils literal notranslate"><span class="pre">#iconClass</span></code>), simply set the <code class="docutils literal notranslate"><span class="pre">icon</span></code> attribute:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyTask</span><span class="p">(</span><span class="n">BaseDeclarativeNote</span><span class="p">):</span>
    <span class="n">icon</span> <span class="o">=</span> <span class="s2">&quot;bx bx-task&quot;</span>
</pre></div>
</div>
</section>
<section id="promoted-attributes">
<h3>Promoted attributes<a class="headerlink" href="#promoted-attributes" title="Link to this heading">¶</a></h3>
<p>A special type of label is one which defines a <a class="reference external" href="https://github.com/zadam/trilium/wiki/Promoted-attributes">promoted attribute</a>. Decorators <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.decorators.html#trilium_alchemy.core.declarative.decorators.label_def" title="trilium_alchemy.core.declarative.decorators.label_def"><code class="xref py py-obj docutils literal notranslate"><span class="pre">label_def</span></code></a> and <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.decorators.html#trilium_alchemy.core.declarative.decorators.relation_def" title="trilium_alchemy.core.declarative.decorators.relation_def"><code class="xref py py-obj docutils literal notranslate"><span class="pre">relation_def</span></code></a> are provided for convenience.</p>
<p>The following creates a workspace template with an icon and a few promoted attributes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@label</span><span class="p">(</span><span class="s2">&quot;person&quot;</span><span class="p">)</span>
<span class="nd">@label_def</span><span class="p">(</span><span class="s2">&quot;altName&quot;</span><span class="p">,</span> <span class="n">multi</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nd">@label_def</span><span class="p">(</span><span class="s2">&quot;birthday&quot;</span><span class="p">,</span> <span class="n">value_type</span><span class="o">=</span><span class="s2">&quot;date&quot;</span><span class="p">)</span>
<span class="nd">@relation_def</span><span class="p">(</span><span class="s2">&quot;livesAt&quot;</span><span class="p">)</span>
<span class="nd">@relation_def</span><span class="p">(</span><span class="s2">&quot;livedAt&quot;</span><span class="p">,</span> <span class="n">multi</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">BaseWorkspaceTemplateNote</span><span class="p">):</span>
    <span class="n">icon</span> <span class="o">=</span> <span class="s2">&quot;bx bxs-user-circle&quot;</span>
</pre></div>
</div>
<p><img alt="Screenshot" src="../../_images/template-screenshot.png" /></p>
</section>
</section>
<section id="adding-children">
<h2>Adding children<a class="headerlink" href="#adding-children" title="Link to this heading">¶</a></h2>
<p>Use <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.decorators.html#trilium_alchemy.core.declarative.decorators.children" title="trilium_alchemy.core.declarative.decorators.children"><code class="xref py py-obj docutils literal notranslate"><span class="pre">children</span></code></a> or <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.decorators.html#trilium_alchemy.core.declarative.decorators.child" title="trilium_alchemy.core.declarative.decorators.child"><code class="xref py py-obj docutils literal notranslate"><span class="pre">child</span></code></a> to add children:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Child1</span><span class="p">(</span><span class="n">BaseDeclarativeNote</span><span class="p">):</span>
    <span class="k">pass</span>
<span class="k">class</span> <span class="nc">Child2</span><span class="p">(</span><span class="n">BaseDeclarativeNote</span><span class="p">):</span>
    <span class="k">pass</span>
<span class="k">class</span> <span class="nc">Child3</span><span class="p">(</span><span class="n">BaseDeclarativeNote</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nd">@children</span><span class="p">(</span> <span class="c1"># implicit branch prefix</span>
    <span class="n">Child1</span><span class="p">,</span> 
    <span class="p">(</span><span class="n">Child2</span><span class="p">,</span> <span class="s2">&quot;My prefix&quot;</span><span class="p">),</span>
<span class="p">)</span> 
<span class="nd">@child</span><span class="p">(</span><span class="n">Child3</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;My prefix&quot;</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># explicit branch params</span>
<span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">BaseDeclarativeNote</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">my_note</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</pre></div>
</div>
<p>This is equivalent to the following imperative approach:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_note</span> <span class="o">=</span> <span class="n">Note</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Parent&quot;</span><span class="p">)</span>
<span class="n">my_note</span> <span class="o">+=</span> <span class="p">[</span>
    <span class="n">Note</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Child1&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="n">Note</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Child2&quot;</span><span class="p">),</span> <span class="s2">&quot;My prefix&quot;</span><span class="p">),</span>
    <span class="n">Branch</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">Note</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Child3&quot;</span><span class="p">),</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;My prefix&quot;</span><span class="p">,</span> <span class="n">expanded</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="mixin-subclasses">
<h2>Mixin subclasses<a class="headerlink" href="#mixin-subclasses" title="Link to this heading">¶</a></h2>
<p>Sometimes you want to logically group and reuse attributes and/or children, but don’t need a fully-featured <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote</span></code></a>. In those cases you can use a <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeMixin" title="trilium_alchemy.core.declarative.base.BaseDeclarativeMixin"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeMixin</span></code></a>.</p>
<p>The basic technique is to subclass <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeMixin" title="trilium_alchemy.core.declarative.base.BaseDeclarativeMixin"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeMixin</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@label</span><span class="p">(</span><span class="s2">&quot;sorted&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">SortedMixin</span><span class="p">(</span><span class="n">BaseDeclarativeMixin</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Now you can simply inherit from this mixin if you want a note’s children to be sorted:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MySortedNote</span><span class="p">(</span><span class="n">BaseDeclarativeNote</span><span class="p">,</span> <span class="n">SortedMixin</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</section>
<section id="setting-content-from-file">
<h2>Setting content from file<a class="headerlink" href="#setting-content-from-file" title="Link to this heading">¶</a></h2>
<p>Set note content from a file by setting <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote.content_file" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote.content_file"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote.content_file</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyFrontendScript</span><span class="p">(</span><span class="n">BaseDeclarativeNote</span><span class="p">):</span>
    <span class="n">note_type_</span> <span class="o">=</span> <span class="s2">&quot;code&quot;</span>
    <span class="n">mime_</span> <span class="o">=</span> <span class="s2">&quot;application/javascript;env=frontend&quot;</span>
    <span class="n">content_file</span> <span class="o">=</span> <span class="s2">&quot;assets/myFrontendScript.js&quot;</span>
</pre></div>
</div>
<p>The filename is relative to the package or subpackage the class is defined in. Currently accessing parent paths (<code class="docutils literal notranslate"><span class="pre">&quot;..&quot;</span></code>) is not supported.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you use <a class="reference external" href="https://python-poetry.org/">Poetry</a> and want to publish a Python note hierarchy with content from a file, no additional steps are needed to package these files if they reside in your project. If you use setuptools, you’ll need to use <code class="docutils literal notranslate"><span class="pre">package_data</span></code> or <code class="docutils literal notranslate"><span class="pre">data_files</span></code> to include them (however using setuptools for this is currently untested).</p>
</div>
</section>
<section id="singleton-notes">
<h2>Singleton notes<a class="headerlink" href="#singleton-notes" title="Link to this heading">¶</a></h2>
<p>In some cases it’s important to generate the same <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.note.html#trilium_alchemy.core.note.Note.note_id" title="trilium_alchemy.core.note.Note.note_id"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Note.note_id</span></code></a> every time the class is instantiated. Templates, for example, should have only one instance and be automatically updated as changes are made to the code. This behavior can be accomplished in a number of ways.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Without setting <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote.leaf" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote.leaf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote.leaf</span></code></a>, TriliumAlchemy assumes that you want to explicitly specify the note’s children in the class itself. Therefore it will delete any existing children which aren’t declaratively added. See <a class="reference internal" href="#leaf-notes"><span class="std std-ref">Leaf notes</span></a> to learn more.</p>
</div>
<section id="setting-singleton">
<h3>Setting <code class="docutils literal notranslate"><span class="pre">singleton</span></code><a class="headerlink" href="#setting-singleton" title="Link to this heading">¶</a></h3>
<p>When <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote.singleton" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote.singleton"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote.singleton</span></code></a> is set, the note’s <code class="docutils literal notranslate"><span class="pre">note_id</span></code> is generated based on the fully qualified class name, i.e. the class name including its modpath.</p>
<p>The following creates a template note for a task:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@label</span><span class="p">(</span><span class="s2">&quot;template&quot;</span><span class="p">)</span>
<span class="nd">@label</span><span class="p">(</span><span class="s2">&quot;iconClass&quot;</span><span class="p">,</span> <span class="s2">&quot;bx bx-task&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Task</span><span class="p">(</span><span class="n">BaseDeclarativeNote</span><span class="p">):</span>
    <span class="n">singleton</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</section>
<section id="setting-idempotent">
<h3>Setting <code class="docutils literal notranslate"><span class="pre">idempotent</span></code><a class="headerlink" href="#setting-idempotent" title="Link to this heading">¶</a></h3>
<p>When <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote.idempotent" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote.idempotent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote.idempotent</span></code></a> is set, the class name (not fully qualified) is hashed to generate <code class="docutils literal notranslate"><span class="pre">note_id</span></code>.</p>
<p>It uses the same hash algorithm used by <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote.singleton" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote.singleton"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote.singleton</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># note_id won&#39;t change if we move the class to a different module</span>
<span class="nd">@label</span><span class="p">(</span><span class="s2">&quot;template&quot;</span><span class="p">)</span>
<span class="nd">@label</span><span class="p">(</span><span class="s2">&quot;iconClass&quot;</span><span class="p">,</span> <span class="s2">&quot;bx bx-task&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Task</span><span class="p">(</span><span class="n">BaseDeclarativeNote</span><span class="p">):</span>
    <span class="n">idempotent</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</section>
<section id="setting-note-id-seed">
<h3>Setting <code class="docutils literal notranslate"><span class="pre">note_id_seed</span></code><a class="headerlink" href="#setting-note-id-seed" title="Link to this heading">¶</a></h3>
<p>When <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote.note_id_seed" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote.note_id_seed"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote.note_id_seed</span></code></a> is set, the provided value is hashed to generate <code class="docutils literal notranslate"><span class="pre">note_id</span></code>.</p>
<p>It uses the same hash algorithm used by <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote.singleton" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote.singleton"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote.singleton</span></code></a> and <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote.idempotent" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote.idempotent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote.idempotent</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># note_id won&#39;t change if we rename the class or move it to a different module</span>
<span class="nd">@label</span><span class="p">(</span><span class="s2">&quot;template&quot;</span><span class="p">)</span>
<span class="nd">@label</span><span class="p">(</span><span class="s2">&quot;iconClass&quot;</span><span class="p">,</span> <span class="s2">&quot;bx bx-task&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Task</span><span class="p">(</span><span class="n">BaseDeclarativeNote</span><span class="p">):</span>
    <span class="n">note_id_seed</span> <span class="o">=</span> <span class="s2">&quot;Task&quot;</span>
</pre></div>
</div>
</section>
<section id="setting-note-id">
<h3>Setting <code class="docutils literal notranslate"><span class="pre">note_id</span></code><a class="headerlink" href="#setting-note-id" title="Link to this heading">¶</a></h3>
<p>When <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote.note_id_" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote.note_id_"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote.note_id_</span></code></a> is set, the provided value is used as <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.note.html#trilium_alchemy.core.note.Note.note_id" title="trilium_alchemy.core.note.Note.note_id"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Note.note_id</span></code></a> directly.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyNote</span><span class="p">(</span><span class="n">BaseDeclarativeNote</span><span class="p">):</span>
    <span class="n">note_id_</span> <span class="o">=</span> <span class="s2">&quot;my_note_id&quot;</span>
</pre></div>
</div>
</section>
<section id="passing-note-id">
<h3>Passing <code class="docutils literal notranslate"><span class="pre">note_id</span></code><a class="headerlink" href="#passing-note-id" title="Link to this heading">¶</a></h3>
<p>When <code class="docutils literal notranslate"><span class="pre">note_id</span></code> is passed in the constructor of a <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote</span></code></a> subclass, it’s similarly considered a singleton.</p>
</section>
<section id="child-of-singleton">
<h3>Child of singleton<a class="headerlink" href="#child-of-singleton" title="Link to this heading">¶</a></h3>
<p>Every child of a singleton note is required to also have a deterministic <code class="docutils literal notranslate"><span class="pre">note_id</span></code>. Therefore a <code class="docutils literal notranslate"><span class="pre">note_id</span></code> is generated for children of singletons, even if they don’t satisfy any of the above criteria.</p>
<p>This is recursive, so an entire note tree specified by <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote</span></code></a> subclasses will be instantiated with a deterministic <code class="docutils literal notranslate"><span class="pre">note_id</span></code> if the root satisfies any of the above criteria.</p>
</section>
</section>
<section id="adding-relations">
<h2>Adding relations<a class="headerlink" href="#adding-relations" title="Link to this heading">¶</a></h2>
<p>You can declaratively add a relation to another note, as long as the target note is a singleton.</p>
<p>For example, to create a <code class="docutils literal notranslate"><span class="pre">~template</span></code> relation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@relation</span><span class="p">(</span><span class="s2">&quot;template&quot;</span><span class="p">,</span> <span class="n">Task</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">TaskInstance</span><span class="p">(</span><span class="n">BaseDeclarativeNote</span><span class="p">):</span> <span class="k">pass</span>
</pre></div>
</div>
<p>Now you can create a task by simply instantiating <code class="docutils literal notranslate"><span class="pre">TaskInstance</span></code>, and it will automatically have <code class="docutils literal notranslate"><span class="pre">~template=Task</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_task</span> <span class="o">=</span> <span class="n">TaskInstance</span><span class="p">()</span>

<span class="k">assert</span> <span class="n">my_task</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">get_target</span><span class="p">(</span><span class="s2">&quot;template&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="n">Task</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="custom-initializer-to-add-attributes-and-children">
<h2>Custom initializer to add attributes and children<a class="headerlink" href="#custom-initializer-to-add-attributes-and-children" title="Link to this heading">¶</a></h2>
<p>Implement <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeMixin.init" title="trilium_alchemy.core.declarative.base.BaseDeclarativeMixin.init"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeMixin.init</span></code></a> to add attributes and children dynamically. Use the following APIs to add attributes and children:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeMixin.create_declarative_label" title="trilium_alchemy.core.declarative.base.BaseDeclarativeMixin.create_declarative_label"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeMixin.create_declarative_label</span></code></a></p></li>
<li><p><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeMixin.create_declarative_relation" title="trilium_alchemy.core.declarative.base.BaseDeclarativeMixin.create_declarative_relation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeMixin.create_declarative_relation</span></code></a></p></li>
<li><p><a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeMixin.create_declarative_child" title="trilium_alchemy.core.declarative.base.BaseDeclarativeMixin.create_declarative_child"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeMixin.create_declarative_child</span></code></a></p></li>
</ul>
<p>These APIs are required for singleton notes to generate a deterministic id for attributes and children, generating the same subtree every time the <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote</span></code></a> subclass is instantiated.</p>
<p>For example, a mixin which provides a convenient way to set an attribute <code class="docutils literal notranslate"><span class="pre">#myLabel</span></code> to a given value:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyMixin</span><span class="p">(</span><span class="n">BaseDeclarativeMixin</span><span class="p">):</span>

    <span class="n">my_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    If set, add label `myLabel` with provided value.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Attribute</span><span class="p">],</span> <span class="n">children</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Branch</span><span class="p">]):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">my_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">attributes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_declarative_label</span><span class="p">(</span><span class="s2">&quot;myLabel&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">my_label</span><span class="p">)</span>
            <span class="p">)</span>

<span class="k">class</span> <span class="nc">MyNote</span><span class="p">(</span><span class="n">BaseDeclarativeNote</span><span class="p">,</span> <span class="n">MyMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This note will automatically have the label `#myLabel=my-label-value`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">my_label</span> <span class="o">=</span> <span class="s2">&quot;my-label-value&quot;</span>

<span class="n">my_note</span> <span class="o">=</span> <span class="n">MyNote</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">my_note</span><span class="p">[</span><span class="s2">&quot;myLabel&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;my-label-value&quot;</span>
</pre></div>
</div>
</section>
<section id="leaf-notes">
<span id="id1"></span><h2>Leaf notes<a class="headerlink" href="#leaf-notes" title="Link to this heading">¶</a></h2>
<p>If you design a note hierarchy using this approach, you might want to designate some “folder” notes to hold notes maintained in the UI. Set <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.base.html#trilium_alchemy.core.declarative.base.BaseDeclarativeNote.leaf" title="trilium_alchemy.core.declarative.base.BaseDeclarativeNote.leaf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseDeclarativeNote.leaf</span></code></a> to indicate this, in which case existing children are kept intact and using <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.decorators.html#trilium_alchemy.core.declarative.decorators.children" title="trilium_alchemy.core.declarative.decorators.children"><code class="xref py py-obj docutils literal notranslate"><span class="pre">children</span></code></a> or <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.core.declarative.decorators.html#trilium_alchemy.core.declarative.decorators.child" title="trilium_alchemy.core.declarative.decorators.child"><code class="xref py py-obj docutils literal notranslate"><span class="pre">child</span></code></a> will raise an exception.</p>
<p>For example, this would be necessary for a list of contacts:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@label</span><span class="p">(</span><span class="s2">&quot;sorted&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Contacts</span><span class="p">(</span><span class="n">BaseDeclarativeNote</span><span class="p">):</span>
    <span class="n">icon</span> <span class="o">=</span> <span class="s2">&quot;bx bx-group&quot;</span>
    <span class="n">singleton</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">leaf</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>Now, assuming it has been placed in your hierarchy, you can access your contact list by simply instantiating <code class="docutils literal notranslate"><span class="pre">Contacts</span></code>.</p>
<p>If <code class="code docutils literal highlight highlight-python"><span class="n">leaf</span> <span class="ow">is</span> <span class="kc">False</span></code> and <code class="docutils literal notranslate"><span class="pre">note_id</span></code> is deterministically generated (e.g. it’s a singleton or child of a singleton), a label <code class="docutils literal notranslate"><span class="pre">#cssClass=triliumAlchemyDeclarative</span></code> is added by TriliumAlchemy. This enables hiding of the “Add child note” button in Trilium’s UI via the <code class="xref py py-obj docutils literal notranslate"><span class="pre">AppCss</span></code> note added by <a class="reference internal" href="../../build/autodoc2/trilium_alchemy/trilium_alchemy.lib.system_types.html#trilium_alchemy.lib.system_types.BaseRootSystemNote" title="trilium_alchemy.lib.system_types.BaseRootSystemNote"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseRootSystemNote</span></code></a>.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="template-notes.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Example: Template notes</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../working-with-notes/branches.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Branches</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023-2024, mm21
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Declarative notes: Notes as code</a><ul>
<li><a class="reference internal" href="#note-subclasses">Note subclasses</a></li>
<li><a class="reference internal" href="#setting-fields">Setting fields</a></li>
<li><a class="reference internal" href="#adding-attributes">Adding attributes</a><ul>
<li><a class="reference internal" href="#icon-helper">Icon helper</a></li>
<li><a class="reference internal" href="#promoted-attributes">Promoted attributes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adding-children">Adding children</a></li>
<li><a class="reference internal" href="#mixin-subclasses">Mixin subclasses</a></li>
<li><a class="reference internal" href="#setting-content-from-file">Setting content from file</a></li>
<li><a class="reference internal" href="#singleton-notes">Singleton notes</a><ul>
<li><a class="reference internal" href="#setting-singleton">Setting <code class="docutils literal notranslate"><span class="pre">singleton</span></code></a></li>
<li><a class="reference internal" href="#setting-idempotent">Setting <code class="docutils literal notranslate"><span class="pre">idempotent</span></code></a></li>
<li><a class="reference internal" href="#setting-note-id-seed">Setting <code class="docutils literal notranslate"><span class="pre">note_id_seed</span></code></a></li>
<li><a class="reference internal" href="#setting-note-id">Setting <code class="docutils literal notranslate"><span class="pre">note_id</span></code></a></li>
<li><a class="reference internal" href="#passing-note-id">Passing <code class="docutils literal notranslate"><span class="pre">note_id</span></code></a></li>
<li><a class="reference internal" href="#child-of-singleton">Child of singleton</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adding-relations">Adding relations</a></li>
<li><a class="reference internal" href="#custom-initializer-to-add-attributes-and-children">Custom initializer to add attributes and children</a></li>
<li><a class="reference internal" href="#leaf-notes">Leaf notes</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=fe7df9b0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/custom.js?v=98a9d4e2"></script>
    </body>
</html>